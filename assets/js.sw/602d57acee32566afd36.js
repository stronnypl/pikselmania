"use strict";(()=>{var u=Math.pow;var le=typeof require!="undefined"?require:D=>{throw new Error('Dynamic require of "'+D+'" is not supported')};(self.webpackChunkmodern_prestashop_build_tool=self.webpackChunkmodern_prestashop_build_tool||[]).push([[790],{9790:(D,H,p)=>{p.r(H),p.d(H,{default:()=>ae});var te=p(7628),L=p(4625),I=p(9482);function ae(se){let{swiper:t,extendParams:ie,on:d,emit:ne}=se;const O=(0,te.Jj)();ie({zoom:{enabled:!1,maxRatio:3,minRatio:1,toggle:!0,containerClass:"swiper-zoom-container",zoomedSlideClass:"swiper-slide-zoomed"}}),t.zoom={enabled:!1};let f=1,C=!1,$,v,x;const a={$slideEl:void 0,slideWidth:void 0,slideHeight:void 0,$imageEl:void 0,$imageWrapEl:void 0,maxRatio:3},e={isTouched:void 0,isMoved:void 0,currentX:void 0,currentY:void 0,minX:void 0,minY:void 0,maxX:void 0,maxY:void 0,width:void 0,height:void 0,startX:void 0,startY:void 0,touchesStart:{},touchesCurrent:{}},o={x:void 0,y:void 0,prevPositionX:void 0,prevPositionY:void 0,prevTime:void 0};let y=1;Object.defineProperty(t.zoom,"scale",{get(){return y},set(s){if(y!==s){const i=a.$imageEl?a.$imageEl[0]:void 0,n=a.$slideEl?a.$slideEl[0]:void 0;ne("zoomChange",s,i,n)}y=s}});function G(s){if(s.targetTouches.length<2)return 1;const i=s.targetTouches[0].pageX,n=s.targetTouches[0].pageY,r=s.targetTouches[1].pageX,l=s.targetTouches[1].pageY;return Math.sqrt(u(r-i,2)+u(l-n,2))}function X(s){const i=t.support,n=t.params.zoom;if(v=!1,x=!1,!i.gestures){if(s.type!=="touchstart"||s.type==="touchstart"&&s.targetTouches.length<2)return;v=!0,a.scaleStart=G(s)}if((!a.$slideEl||!a.$slideEl.length)&&(a.$slideEl=(0,L.Z)(s.target).closest(`.${t.params.slideClass}`),a.$slideEl.length===0&&(a.$slideEl=t.slides.eq(t.activeIndex)),a.$imageEl=a.$slideEl.find(`.${n.containerClass}`).eq(0).find("picture, img, svg, canvas, .swiper-zoom-target").eq(0),a.$imageWrapEl=a.$imageEl.parent(`.${n.containerClass}`),a.maxRatio=a.$imageWrapEl.attr("data-swiper-zoom")||n.maxRatio,a.$imageWrapEl.length===0)){a.$imageEl=void 0;return}a.$imageEl&&a.$imageEl.transition(0),C=!0}function W(s){const i=t.support,n=t.params.zoom,r=t.zoom;if(!i.gestures){if(s.type!=="touchmove"||s.type==="touchmove"&&s.targetTouches.length<2)return;x=!0,a.scaleMove=G(s)}if(!a.$imageEl||a.$imageEl.length===0){s.type==="gesturechange"&&X(s);return}i.gestures?r.scale=s.scale*f:r.scale=a.scaleMove/a.scaleStart*f,r.scale>a.maxRatio&&(r.scale=a.maxRatio-1+u(r.scale-a.maxRatio+1,.5)),r.scale<n.minRatio&&(r.scale=n.minRatio+1-u(n.minRatio-r.scale+1,.5)),a.$imageEl.transform(`translate3d(0,0,0) scale(${r.scale})`)}function h(s){const i=t.device,n=t.support,r=t.params.zoom,l=t.zoom;if(!n.gestures){if(!v||!x||s.type!=="touchend"||s.type==="touchend"&&s.changedTouches.length<2&&!i.android)return;v=!1,x=!1}!a.$imageEl||a.$imageEl.length===0||(l.scale=Math.max(Math.min(l.scale,a.maxRatio),r.minRatio),a.$imageEl.transition(t.params.speed).transform(`translate3d(0,0,0) scale(${l.scale})`),f=l.scale,C=!1,l.scale===1&&(a.$slideEl=void 0))}function re(s){const i=t.device;!a.$imageEl||a.$imageEl.length===0||e.isTouched||(i.android&&s.cancelable&&s.preventDefault(),e.isTouched=!0,e.touchesStart.x=s.type==="touchstart"?s.targetTouches[0].pageX:s.pageX,e.touchesStart.y=s.type==="touchstart"?s.targetTouches[0].pageY:s.pageY)}function A(s){const i=t.zoom;if(!a.$imageEl||a.$imageEl.length===0||(t.allowClick=!1,!e.isTouched||!a.$slideEl))return;e.isMoved||(e.width=a.$imageEl[0].offsetWidth,e.height=a.$imageEl[0].offsetHeight,e.startX=(0,I.R6)(a.$imageWrapEl[0],"x")||0,e.startY=(0,I.R6)(a.$imageWrapEl[0],"y")||0,a.slideWidth=a.$slideEl[0].offsetWidth,a.slideHeight=a.$slideEl[0].offsetHeight,a.$imageWrapEl.transition(0));const n=e.width*i.scale,r=e.height*i.scale;if(!(n<a.slideWidth&&r<a.slideHeight)){if(e.minX=Math.min(a.slideWidth/2-n/2,0),e.maxX=-e.minX,e.minY=Math.min(a.slideHeight/2-r/2,0),e.maxY=-e.minY,e.touchesCurrent.x=s.type==="touchmove"?s.targetTouches[0].pageX:s.pageX,e.touchesCurrent.y=s.type==="touchmove"?s.targetTouches[0].pageY:s.pageY,!e.isMoved&&!C){if(t.isHorizontal()&&(Math.floor(e.minX)===Math.floor(e.startX)&&e.touchesCurrent.x<e.touchesStart.x||Math.floor(e.maxX)===Math.floor(e.startX)&&e.touchesCurrent.x>e.touchesStart.x)){e.isTouched=!1;return}if(!t.isHorizontal()&&(Math.floor(e.minY)===Math.floor(e.startY)&&e.touchesCurrent.y<e.touchesStart.y||Math.floor(e.maxY)===Math.floor(e.startY)&&e.touchesCurrent.y>e.touchesStart.y)){e.isTouched=!1;return}}s.cancelable&&s.preventDefault(),s.stopPropagation(),e.isMoved=!0,e.currentX=e.touchesCurrent.x-e.touchesStart.x+e.startX,e.currentY=e.touchesCurrent.y-e.touchesStart.y+e.startY,e.currentX<e.minX&&(e.currentX=e.minX+1-u(e.minX-e.currentX+1,.8)),e.currentX>e.maxX&&(e.currentX=e.maxX-1+u(e.currentX-e.maxX+1,.8)),e.currentY<e.minY&&(e.currentY=e.minY+1-u(e.minY-e.currentY+1,.8)),e.currentY>e.maxY&&(e.currentY=e.maxY-1+u(e.currentY-e.maxY+1,.8)),o.prevPositionX||(o.prevPositionX=e.touchesCurrent.x),o.prevPositionY||(o.prevPositionY=e.touchesCurrent.y),o.prevTime||(o.prevTime=Date.now()),o.x=(e.touchesCurrent.x-o.prevPositionX)/(Date.now()-o.prevTime)/2,o.y=(e.touchesCurrent.y-o.prevPositionY)/(Date.now()-o.prevTime)/2,Math.abs(e.touchesCurrent.x-o.prevPositionX)<2&&(o.x=0),Math.abs(e.touchesCurrent.y-o.prevPositionY)<2&&(o.y=0),o.prevPositionX=e.touchesCurrent.x,o.prevPositionY=e.touchesCurrent.y,o.prevTime=Date.now(),a.$imageWrapEl.transform(`translate3d(${e.currentX}px, ${e.currentY}px,0)`)}}function oe(){const s=t.zoom;if(!a.$imageEl||a.$imageEl.length===0)return;if(!e.isTouched||!e.isMoved){e.isTouched=!1,e.isMoved=!1;return}e.isTouched=!1,e.isMoved=!1;let i=300,n=300;const r=o.x*i,l=e.currentX+r,g=o.y*n,E=e.currentY+g;o.x!==0&&(i=Math.abs((l-e.currentX)/o.x)),o.y!==0&&(n=Math.abs((E-e.currentY)/o.y));const Y=Math.max(i,n);e.currentX=l,e.currentY=E;const z=e.width*s.scale,c=e.height*s.scale;e.minX=Math.min(a.slideWidth/2-z/2,0),e.maxX=-e.minX,e.minY=Math.min(a.slideHeight/2-c/2,0),e.maxY=-e.minY,e.currentX=Math.max(Math.min(e.currentX,e.maxX),e.minX),e.currentY=Math.max(Math.min(e.currentY,e.maxY),e.minY),a.$imageWrapEl.transition(Y).transform(`translate3d(${e.currentX}px, ${e.currentY}px,0)`)}function q(){const s=t.zoom;a.$slideEl&&t.previousIndex!==t.activeIndex&&(a.$imageEl&&a.$imageEl.transform("translate3d(0,0,0) scale(1)"),a.$imageWrapEl&&a.$imageWrapEl.transform("translate3d(0,0,0)"),s.scale=1,f=1,a.$slideEl=void 0,a.$imageEl=void 0,a.$imageWrapEl=void 0)}function j(s){const i=t.zoom,n=t.params.zoom;if(a.$slideEl||(s&&s.target&&(a.$slideEl=(0,L.Z)(s.target).closest(`.${t.params.slideClass}`)),a.$slideEl||(t.params.virtual&&t.params.virtual.enabled&&t.virtual?a.$slideEl=t.$wrapperEl.children(`.${t.params.slideActiveClass}`):a.$slideEl=t.slides.eq(t.activeIndex)),a.$imageEl=a.$slideEl.find(`.${n.containerClass}`).eq(0).find("picture, img, svg, canvas, .swiper-zoom-target").eq(0),a.$imageWrapEl=a.$imageEl.parent(`.${n.containerClass}`)),!a.$imageEl||a.$imageEl.length===0||!a.$imageWrapEl||a.$imageWrapEl.length===0)return;t.params.cssMode&&(t.wrapperEl.style.overflow="hidden",t.wrapperEl.style.touchAction="none"),a.$slideEl.addClass(`${n.zoomedSlideClass}`);let r,l,g,E,Y,z,c,m,N,Q,V,ee,M,w,S,P,_,R;typeof e.touchesStart.x=="undefined"&&s?(r=s.type==="touchend"?s.changedTouches[0].pageX:s.pageX,l=s.type==="touchend"?s.changedTouches[0].pageY:s.pageY):(r=e.touchesStart.x,l=e.touchesStart.y),i.scale=a.$imageWrapEl.attr("data-swiper-zoom")||n.maxRatio,f=a.$imageWrapEl.attr("data-swiper-zoom")||n.maxRatio,s?(_=a.$slideEl[0].offsetWidth,R=a.$slideEl[0].offsetHeight,g=a.$slideEl.offset().left+O.scrollX,E=a.$slideEl.offset().top+O.scrollY,Y=g+_/2-r,z=E+R/2-l,N=a.$imageEl[0].offsetWidth,Q=a.$imageEl[0].offsetHeight,V=N*i.scale,ee=Q*i.scale,M=Math.min(_/2-V/2,0),w=Math.min(R/2-ee/2,0),S=-M,P=-w,c=Y*i.scale,m=z*i.scale,c<M&&(c=M),c>S&&(c=S),m<w&&(m=w),m>P&&(m=P)):(c=0,m=0),a.$imageWrapEl.transition(300).transform(`translate3d(${c}px, ${m}px,0)`),a.$imageEl.transition(300).transform(`translate3d(0,0,0) scale(${i.scale})`)}function k(){const s=t.zoom,i=t.params.zoom;a.$slideEl||(t.params.virtual&&t.params.virtual.enabled&&t.virtual?a.$slideEl=t.$wrapperEl.children(`.${t.params.slideActiveClass}`):a.$slideEl=t.slides.eq(t.activeIndex),a.$imageEl=a.$slideEl.find(`.${i.containerClass}`).eq(0).find("picture, img, svg, canvas, .swiper-zoom-target").eq(0),a.$imageWrapEl=a.$imageEl.parent(`.${i.containerClass}`)),!(!a.$imageEl||a.$imageEl.length===0||!a.$imageWrapEl||a.$imageWrapEl.length===0)&&(t.params.cssMode&&(t.wrapperEl.style.overflow="",t.wrapperEl.style.touchAction=""),s.scale=1,f=1,a.$imageWrapEl.transition(300).transform("translate3d(0,0,0)"),a.$imageEl.transition(300).transform("translate3d(0,0,0) scale(1)"),a.$slideEl.removeClass(`${i.zoomedSlideClass}`),a.$slideEl=void 0)}function B(s){const i=t.zoom;i.scale&&i.scale!==1?k():j(s)}function T(){const s=t.support,i=t.touchEvents.start==="touchstart"&&s.passiveListener&&t.params.passiveListeners?{passive:!0,capture:!1}:!1,n=s.passiveListener?{passive:!1,capture:!0}:!0;return{passiveListener:i,activeListenerWithCapture:n}}function b(){return`.${t.params.slideClass}`}function K(s){const{passiveListener:i}=T(),n=b();t.$wrapperEl[s]("gesturestart",n,X,i),t.$wrapperEl[s]("gesturechange",n,W,i),t.$wrapperEl[s]("gestureend",n,h,i)}function U(){$||($=!0,K("on"))}function Z(){!$||($=!1,K("off"))}function J(){const s=t.zoom;if(s.enabled)return;s.enabled=!0;const i=t.support,{passiveListener:n,activeListenerWithCapture:r}=T(),l=b();i.gestures?(t.$wrapperEl.on(t.touchEvents.start,U,n),t.$wrapperEl.on(t.touchEvents.end,Z,n)):t.touchEvents.start==="touchstart"&&(t.$wrapperEl.on(t.touchEvents.start,l,X,n),t.$wrapperEl.on(t.touchEvents.move,l,W,r),t.$wrapperEl.on(t.touchEvents.end,l,h,n),t.touchEvents.cancel&&t.$wrapperEl.on(t.touchEvents.cancel,l,h,n)),t.$wrapperEl.on(t.touchEvents.move,`.${t.params.zoom.containerClass}`,A,r)}function F(){const s=t.zoom;if(!s.enabled)return;const i=t.support;s.enabled=!1;const{passiveListener:n,activeListenerWithCapture:r}=T(),l=b();i.gestures?(t.$wrapperEl.off(t.touchEvents.start,U,n),t.$wrapperEl.off(t.touchEvents.end,Z,n)):t.touchEvents.start==="touchstart"&&(t.$wrapperEl.off(t.touchEvents.start,l,X,n),t.$wrapperEl.off(t.touchEvents.move,l,W,r),t.$wrapperEl.off(t.touchEvents.end,l,h,n),t.touchEvents.cancel&&t.$wrapperEl.off(t.touchEvents.cancel,l,h,n)),t.$wrapperEl.off(t.touchEvents.move,`.${t.params.zoom.containerClass}`,A,r)}d("init",()=>{t.params.zoom.enabled&&J()}),d("destroy",()=>{F()}),d("touchStart",(s,i)=>{!t.zoom.enabled||re(i)}),d("touchEnd",(s,i)=>{!t.zoom.enabled||oe(i)}),d("doubleTap",(s,i)=>{!t.animating&&t.params.zoom.enabled&&t.zoom.enabled&&t.params.zoom.toggle&&B(i)}),d("transitionEnd",()=>{t.zoom.enabled&&t.params.zoom.enabled&&q()}),d("slideChange",()=>{t.zoom.enabled&&t.params.zoom.enabled&&t.params.cssMode&&q()}),Object.assign(t.zoom,{enable:J,disable:F,in:j,out:k,toggle:B})}}}]);})();
